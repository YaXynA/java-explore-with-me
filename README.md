# Explore with me - микросервисное приложение-афиша мероприятий
Java, Spring (Boot, Data), PostgreSQL, REST API, Docker, Mockito, JUnit, Postman, Lombok

## О проекте
*Приложение для размещения мероприятий и поиска компаний для участия в них*
</br>
</br>
<img src ="https://camo.githubusercontent.com/34079f90cf861829a2d2fb5726c6bd7eff8e2d3bad448c2e70047daa0ade439f/68747470733a2f2f70696374757265732e73332e79616e6465782e6e65742f7265736f75726365732f5331395f30392d325f313637343535383734382e706e67">
</br>
</br>
</br>
**Приложение содержит два микросервиса:**

> [!IMPORTANT]
> main-service для бизнес-логики

> [!TIP]
> stat-service для сбора статистики просмотра событий по ip, который состоит из трех модулей
>1. Модуль общих DTO
>2. Модуль сервиса статистики
>3. Модуль клиента сервиса статистики

<ins>У каждого микросервиса есть своя база данных.</ins>

## Основная функциональность:
### Неавторизованные пользователи
- просматривать все события, в том числе по категориям
- видеть детали отдельных событий
- видеть закрепленные подборки событий
- оставлять комментарии

### Авторизованные пользователи
- добавление в приложение новые мероприятия, редактировать их и просматривать после добавления
- подача заявок на участие в интересующих мероприятиях
- создатель мероприятия может подтверждать заявки, которые отправили другие пользователи сервиса

### Администраторы
- добавление, изменение и удаление категорий для событий
- добавление, удаление и закрепление на главной странице подборки мероприятий
- модерация событий, размещённых пользователями, — публикация или отклонение

## Эндпоинты
### main-service
- POST /users/{userId}/events - добавить новое событие </n>
- GET /users/{userId}/events/{eventId} - получить событие</n>
- PATCH /users/{userId}/events/{eventId} - изменить событие</n>
- GET /users/{userId}/events - получить события пользователя</n>
- GET /users/{userId}/events/{eventId}/requests - получить запросы пользователя на участие в событии</n>
- PATCH /users/{userId}/events/{eventId}/requests - изменить статус (подтверждение, отмена) заявок на участие пользователя в событии</n>
- GET /categories - получить все категории</n>
- GET /categories/{catId} - получить категорию</n>
- GET /compilations - получить все подборки событий</n>
- GET /compilations/{compId} - получить подборку событий</n>

- GET /admin/events - получить события по любым параметрам:</n>
  - users - список id пользователей</n>
  - states - список статусов события (PENDING, PUBLISHED, CANCELED)</n>
  - categories - список id категорий событий</n>
  - rangeStart - начало временного отрезка в формате yyyy-MM-dd HH:mm:ss</n>
  - rangeEnd - конец временного отрезка в формате yyyy-MM-dd HH:mm:ss</n>
  - from - параметр для пагинации</n>
  - size - параметр для пагинации</n>
  - PATCH /admin/events/{eventId} - изменить событие</n>

- GET /events - получить события по любым параметрам:
  - text - текст для поиска в названии и описании событий
  - categories - список id категорий событий
  - paid - только платные события (true/false)
  - rangeStart - начало временного отрезка в формате yyyy-MM-dd HH:mm:ss
  - rangeEnd - конец временного отрезка в формате yyyy-MM-dd HH:mm:ss
  - onlyAvailable - только доступные события, т.е. у которых еще не исчерпан лимит участников (true/false)
  - sort - способ сортировки событий (EVENT_DATE, VIEWS)
  - from - параметр для пагинации
  - size - параметр для пагинации
  - GET /events/{id} - получить событие

- GET /comments/{eventId} - Получает список всех комментариев события по его идентификатору со страницами
- POST /comments/users/{userId}/events/{eventId} - запрос на добавление нового комментария от пользователя к событию
- PATCH /comments/users/{userId}/{commentId} - запрос на обновление комментария пользователем по его ID
- GET /comments/users/{userId}/comments - запрос на получение списка комментариев, созданных пользователем
- DELETE /comments/users/{userId}/{commentId} - запрос на удаление комментария пользователем по его ID
- GET /comments/users//{userId}/{commentId} - запрос на получение комментария пользователя по его ID
- POST /users/{userId}/requests - добавить запрос на участие в событии
- GET /users/{userId}/requests - получить запросы пользователя на участие в событиях
- DELETE /users/{userId}/requests/{requestId}/cancel - отменить запрос на участие в событии
- POST /admin/users - добавить пользователя
- GET /admin/users - получить всех пользователей
- DELETE /admin/users/{userId} - удалить пользователя
- POST /admin/compilations - добавить подборку событий
- DELETE /admin/compilations/{compId} - удалить подборку событий
- PATCH /admin/compilations/{compId} - обновить подборку событий
- POST /admin/categories - добавить новую категорию
- GET /admin/categories/{catId} - получить категорию событий
- DELETE /admin/categories/{catId} - удалить категорию
- GET /admin/comments/{commentId} - получить комментария по идентификатору
- GET /admin/comments/search - поиск комментариев по тексту

### stats-service
- GET /stats - Получение статистики по посещениям
- POST /hit - Сохранение информации о том, что на uri конкретного сервиса был отправлен запрос пользователем
